% !TeX spellcheck = en_US
\section{Problem 4}

In this problem, we will express the derivatives in respect to the matching activation function.

\subsection{LogSig}

This activation function is expressed as
\[
S(x) = \dfrac{1}{1 + e^{-x}}
\]
Multiplying itself with $\left(1 + e^{-x}\right)$ gives
\[
\left(1 + e^{-x}\right) \MathSpace S(x) = 1 \Leftrightarrow e^{-x} = \frac{1}{S(x)} - 1
\]
So, activation function's derivative will be
\[
\begin{aligned}[c]
\dfrac{dS}{dx} &= \dfrac{d\left(\left(1+e^{-x}\right)^{-1}\right)}{dx} = \left(1+e^{-x}\right)^{-2} \MathSpace e^{-x} = S^2(x) \MathSpace \left(\dfrac{1}{S(x)} -1 \right) \\
&= S(x) - S^2(x) = S(x) \MathSpace \left( 1 - S(x) \right)
\end{aligned}
\]

\subsection{TanSig}

Activation function is 
\[
S(x) = \dfrac{e^x - e^{-x}}{e^x + e^{-x}}
\]

Its derivative is 
\begin{equation}
\begin{gathered}
\frac{dS}{dx} = \dfrac{\left(e^x +e^{-x} \right)\left(e^x +e^{-x} \right) - \left(e^x - e^{-x} \right)\left(e^x - e^{-x} \right)}{\left(e^x + e^{-x} \right)^2} = \\
= \dfrac{\left( e^x + e^{-x} \right)^2 - \left( e^x - e^{-x} \right)^2}{\left( e^x + e^{-x} \right)^2} = 1- \left(\dfrac{e^x - e^{-x}}{e^x + e^{-x}}\right)^2 = 1 - S^2(x)
\end{gathered}
\end{equation}

\subsection{Swish}

Activation function is
\[
S(x) = \dfrac{x}{1 + e^{-x}}
\]
The derivative in respect to $x$ is 
\[
\begin{gathered}
\frac{dS}{dx} = \dfrac{1 + e^{-x} + x e^{-x}}{\left( 1 + e^{-x} \right)^2} = \frac{1 + e^{-x}}{\left( 1 + e^{-x} \right)^2} + \frac{xe^{-x}}{\left( 1 + e^{-x} \right)^2} = \frac{1}{1+e^{-x}} + x \frac{e^{-x}}{\left( 1 + e^{-x} \right)^2}
\end{gathered}
\]
Rewriting the function gives us
\[
\frac{S(x)}{x} = \frac{1}{1 + e^{-x}} \quad \text{and} \quad e^{-x} = \frac{x-S(x)}{S(x)}
\]

So, continuing with the derivative:
\[
\begin{gathered}
\frac{dS}{dx} = \frac{1}{1+e^{-x}} + x \frac{e^{-x}}{\left( 1 + e^{-x} \right)^2} = \frac{S(x)}{x} + \frac{e^{-x}}{1+e^{-x}} \frac{x}{1+e^{-x}} = \frac{S(x)}{x} + S(x) \frac{x}{1+e^{-x}} = \\ 
= \frac{S(x)}{x} + S(x) \frac{S(x)}{x} e^{-x} = \frac{S(x)}{x} \left( 1 + S(x) e^{-x} \right) = \frac{S(x)}{x} \left( 1 + S(x)\frac{x-S(x)}{S(x)} \right) = \\
= \frac{S(x)}{x} \left( 1 + x - S(x) \right) = \frac{S(x)}{x} + S(x) - \frac{S^2(x)}{x}
\end{gathered}
\]
Let $\sigma = \dfrac{1}{1 + e^{-x}}$, thus 
\begin{equation}
\frac{dS}{dx} = \frac{S(x)}{x} + S(x) - \frac{S^2(x)}{x} = \sigma + S(x) - \sigma S(x) = S(x) + \sigma \left( 1 - S(x) \right)
\end{equation}

\subsection{Custom tanh}

Activation function is
\[
S(x) = x \times \tanh\left( \ln \left( 1 + e^x\right) \right) = \dfrac{x \left( 1+e^x \right) - \dfrac{x}{1+e^x}}{1+e^x + \dfrac{1}{1+e^x}}
\]
After some calculations, we can observe a relationship to the Swish function:
\[
S(x) = \dfrac{x \left( 1+e^x \right) - T(-x)}{1+e^x + \dfrac{1}{1+e^x}} = \dfrac{\dfrac{-x^2}{T(-x)} - T(-x)}{\dfrac{-x}{T(-x)} + \dfrac{T(-x)}{x}} = \frac{-x^3 - T^2(-x)}{-x^2 + T^2(-x)}
\]